{"remainingRequest":"/Users/haojianie/Desktop/Web/rppg/node_modules/babel-loader/lib/index.js!/Users/haojianie/Desktop/Web/rppg/node_modules/eslint-loader/index.js??ref--13-0!/Users/haojianie/Desktop/Web/rppg/src/components/sketch.js","dependencies":[{"path":"/Users/haojianie/Desktop/Web/rppg/src/components/sketch.js","mtime":1595441683765},{"path":"/Users/haojianie/Desktop/Web/rppg/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haojianie/Desktop/Web/rppg/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/haojianie/Desktop/Web/rppg/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly92YXIgQ2FudmFzSlMgPSByZXF1aXJlKCcuL2NhbnZhc2pzLm1pbi5qcycpOwppbXBvcnQgKiBhcyB2aXMgZnJvbSAndmlzLXRpbWVsaW5lL3N0YW5kYWxvbmUnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBydW4oKSB7CiAgLy8gc3RhcnQgdGhlIGZyb250LWNhbSAKICB2YXIgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8nKTsKICBzdGFydFZpZGVvKCk7CgogIGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKSB7CiAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgICAgdmlkZW86IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoImxvYWRlZG1ldGFkYXRhIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gdXNlZCB0byBoYXZlIGFuIGUgaGVyZQogICAgICAgICAgY29uc29sZS5sb2coImhlcmUiKTsKICAgICAgICAgIHZpZGVvLnBsYXkoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSAvLyB0aGUgY2hhcnQKCgogIHZhciBuYW1lcyA9IFsidW5pZm9ybSJdOwogIHZhciBncm91cHMgPSBuZXcgdmlzLkRhdGFTZXQoKTsKICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpc3VhbGl6YXRpb24iKTsKICB2YXIgZGF0YXNldCA9IG5ldyB2aXMuRGF0YVNldCgpOwogIHZhciBub3cgPSB2aXMubW9tZW50KCk7CiAgdmFyIGRlbGF5ID0gMTAwOwogIHZhciBvcHRpb25zID0gewogICAgZHJhd1BvaW50czogZmFsc2UsCiAgICBkYXRhQXhpczogewogICAgICB2aXNpYmxlOiB0cnVlLAogICAgICBsZWZ0OiB7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICJOb3JtYWxpemVkIEFtcGxpdHVkZSIKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBsZWdlbmQ6IGZhbHNlLAogICAgc3RhcnQ6IHZpcy5tb21lbnQoKS5hZGQoLTUsICJzZWNvbmRzIiksCiAgICAvLyBkaXNwbGF5IHN0YXJ0LCAgZW5kCiAgICBlbmQ6IHZpcy5tb21lbnQoKS5hZGQoMTAsICJzZWNvbmRzIikKICB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKCiAgdmFyIGdyYXBoMmQgPSBuZXcgdmlzLkdyYXBoMmQoY29udGFpbmVyLCBkYXRhc2V0LCBncm91cHMsIG9wdGlvbnMpOyAvLyBjb3VsZCBkZWxldGUgdGhlIGdyb3VwICwganVzdCB1c2UgZGF0YXNldAoKICBncm91cHMuYWRkKHsKICAgIGlkOiAwLAogICAgY29udGVudDogbmFtZXNbMF0sCiAgICBvcHRpb25zOiB7CiAgICAgIGRyYXdQb2ludHM6IGZhbHNlLAogICAgICBpbnRlcnBvbGF0aW9uOiB7CiAgICAgICAgcGFyYW1ldHJpemF0aW9uOiAidW5pZm9ybSIKICAgICAgfQogICAgfQogIH0pOwoKICBmdW5jdGlvbiBhZGREYXRhUG9pbnQoKSB7CiAgICB2YXIgbm93ID0gdmlzLm1vbWVudCgpOwogICAgdmFyIHlWYWwgPSAxICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApOwogICAgZGF0YXNldC5hZGQoW3sKICAgICAgeDogbm93LAogICAgICB5OiB5VmFsLAogICAgICBncm91cDogMAogICAgfV0pOwogICAgc2V0VGltZW91dChhZGREYXRhUG9pbnQsIGRlbGF5KTsKICB9CgogIGZ1bmN0aW9uIG1vdmVXaW5kb3coKSB7CiAgICB2YXIgc3RyYXRlZ3kgPSAnc3RhdGljJzsKICAgIHZhciByYW5nZSA9IGdyYXBoMmQuZ2V0V2luZG93KCk7CiAgICBub3cgPSB2aXMubW9tZW50KCk7CiAgICB2YXIgaW50ZXJ2YWwgPSByYW5nZS5lbmQgLSByYW5nZS5zdGFydDsKCiAgICBpZiAobm93ID4gcmFuZ2UuZW5kKSB7CiAgICAgIGdyYXBoMmQuc2V0V2luZG93KG5vdyAtIDAuMSAqIGludGVydmFsLCBub3cgKyAwLjkgKiBpbnRlcnZhbCk7CiAgICB9CgogICAgc3dpdGNoIChzdHJhdGVneSkgewogICAgICBkZWZhdWx0OgogICAgICAgIC8vICdzdGF0aWMnCiAgICAgICAgLy8gbW92ZSB0aGUgd2luZG93IDkwJSB0byB0aGUgbGVmdCB3aGVuIG5vdyBpcyBsYXJnZXIgdGhhbiB0aGUgZW5kIG9mIHRoZSB3aW5kb3cKICAgICAgICBpZiAocmFuZ2UgPiAxMCkgewogICAgICAgICAgY29uc29sZS5sb2coIm1vdmUgd2luZG93Iik7CiAgICAgICAgICBncmFwaDJkLnNldFdpbmRvdyhub3cgLSAwLjEgKiBpbnRlcnZhbCwgbm93ICsgMC45ICogaW50ZXJ2YWwpOwogICAgICAgIH0KCiAgICAgICAgc2V0VGltZW91dChtb3ZlV2luZG93LCBkZWxheSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBhZGREYXRhUG9pbnQoKTsKICBtb3ZlV2luZG93KCk7Cn0="},{"version":3,"sources":["/Users/haojianie/Desktop/Web/rppg/src/components/sketch.js"],"names":["vis","run","video","document","getElementById","startVideo","navigator","mediaDevices","getUserMedia","then","stream","srcObject","addEventListener","console","log","play","names","groups","DataSet","container","dataset","now","moment","delay","options","drawPoints","dataAxis","visible","left","title","text","legend","start","add","end","graph2d","Graph2d","id","content","interpolation","parametrization","addDataPoint","yVal","Math","round","random","x","y","group","setTimeout","moveWindow","strategy","range","getWindow","interval","setWindow"],"mappings":"AAAA;AACA,OAAO,KAAKA,GAAZ,MAAqB,yBAArB;AAEA,eAAe,SAASC,GAAT,GAAe;AAE7B;AACA,MAAIC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AAEAC,EAAAA,UAAU;;AAEV,WAASA,UAAT,GAAsB;AACrB,QAAIC,SAAS,CAACC,YAAV,IAA0BD,SAAS,CAACC,YAAV,CAAuBC,YAArD,EAAmE;AAClEF,MAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AACnCN,QAAAA,KAAK,EAAE;AAD4B,OAApC,EAEGO,IAFH,CAEQ,UAASC,MAAT,EAAiB;AACxBR,QAAAA,KAAK,CAACS,SAAN,GAAkBD,MAAlB;AACAR,QAAAA,KAAK,CAACU,gBAAN,CAAuB,gBAAvB,EAAyC,YAAW;AAAE;AACrDC,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAZ,UAAAA,KAAK,CAACa,IAAN;AACA,SAHD;AAIA,OARD;AASA;AACD,GAnB4B,CAqB7B;;;AACA,MAAIC,KAAK,GAAG,CAAC,SAAD,CAAZ;AACA,MAAIC,MAAM,GAAG,IAAIjB,GAAG,CAACkB,OAAR,EAAb;AACA,MAAIC,SAAS,GAAGhB,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAhB;AACA,MAAIgB,OAAO,GAAG,IAAIpB,GAAG,CAACkB,OAAR,EAAd;AACA,MAAIG,GAAG,GAAGrB,GAAG,CAACsB,MAAJ,EAAV;AACA,MAAIC,KAAK,GAAG,GAAZ;AAEA,MAAIC,OAAO,GAAG;AACbC,IAAAA,UAAU,EAAE,KADC;AAEbC,IAAAA,QAAQ,EAAE;AACTC,MAAAA,OAAO,EAAE,IADA;AAETC,MAAAA,IAAI,EAAE;AACLC,QAAAA,KAAK,EAAE;AACNC,UAAAA,IAAI,EAAE;AADA;AADF;AAFG,KAFG;AAUbC,IAAAA,MAAM,EAAE,KAVK;AAWbC,IAAAA,KAAK,EAAEhC,GAAG,CAACsB,MAAJ,GAAaW,GAAb,CAAiB,CAAC,CAAlB,EAAqB,SAArB,CAXM;AAW2B;AACxCC,IAAAA,GAAG,EAAElC,GAAG,CAACsB,MAAJ,GAAaW,GAAb,CAAiB,EAAjB,EAAqB,SAArB;AAZQ,GAAd,CA7B6B,CA6C7B;;AACA,MAAIE,OAAO,GAAG,IAAInC,GAAG,CAACoC,OAAR,CAAgBjB,SAAhB,EAA2BC,OAA3B,EAAoCH,MAApC,EAA4CO,OAA5C,CAAd,CA9C6B,CAgD7B;;AACAP,EAAAA,MAAM,CAACgB,GAAP,CAAW;AACVI,IAAAA,EAAE,EAAE,CADM;AAEVC,IAAAA,OAAO,EAAEtB,KAAK,CAAC,CAAD,CAFJ;AAGVQ,IAAAA,OAAO,EAAE;AACRC,MAAAA,UAAU,EAAE,KADJ;AAERc,MAAAA,aAAa,EAAE;AACdC,QAAAA,eAAe,EAAE;AADH;AAFP;AAHC,GAAX;;AAYA,WAASC,YAAT,GAAwB;AACvB,QAAIpB,GAAG,GAAGrB,GAAG,CAACsB,MAAJ,EAAV;AACA,QAAIoB,IAAI,GAAG,IAAIC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,CAAf;AAEAzB,IAAAA,OAAO,CAACa,GAAR,CAAY,CAAC;AACZa,MAAAA,CAAC,EAAEzB,GADS;AAEZ0B,MAAAA,CAAC,EAAEL,IAFS;AAGZM,MAAAA,KAAK,EAAE;AAHK,KAAD,CAAZ;AAKAC,IAAAA,UAAU,CAACR,YAAD,EAAelB,KAAf,CAAV;AAEA;;AAED,WAAS2B,UAAT,GAAsB;AAErB,QAAIC,QAAQ,GAAG,QAAf;AACA,QAAIC,KAAK,GAAGjB,OAAO,CAACkB,SAAR,EAAZ;AACAhC,IAAAA,GAAG,GAAGrB,GAAG,CAACsB,MAAJ,EAAN;AAEA,QAAIgC,QAAQ,GAAGF,KAAK,CAAClB,GAAN,GAAYkB,KAAK,CAACpB,KAAjC;;AAEA,QAAIX,GAAG,GAAG+B,KAAK,CAAClB,GAAhB,EAAqB;AACpBC,MAAAA,OAAO,CAACoB,SAAR,CAAkBlC,GAAG,GAAG,MAAMiC,QAA9B,EAAwCjC,GAAG,GAAG,MAAMiC,QAApD;AACA;;AAED,YAAQH,QAAR;AACC;AAAS;AACR;AACA,YAAIC,KAAK,GAAG,EAAZ,EAAgB;AACfvC,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAqB,UAAAA,OAAO,CAACoB,SAAR,CAAkBlC,GAAG,GAAG,MAAMiC,QAA9B,EAAwCjC,GAAG,GAAG,MAAMiC,QAApD;AACA;;AACDL,QAAAA,UAAU,CAACC,UAAD,EAAa3B,KAAb,CAAV;AACA;AARF;AAUA;;AAGDkB,EAAAA,YAAY;AACZS,EAAAA,UAAU;AACV","sourcesContent":["//var CanvasJS = require('./canvasjs.min.js');\r\nimport * as vis from 'vis-timeline/standalone';\r\n\r\nexport default function run() {\r\n\r\n\t// start the front-cam \r\n\tvar video = document.getElementById('video');\r\n\r\n\tstartVideo();\r\n\r\n\tfunction startVideo() {\r\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({\r\n\t\t\t\tvideo: true\r\n\t\t\t}).then(function(stream) {\r\n\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\tvideo.addEventListener(\"loadedmetadata\", function() { // used to have an e here\r\n\t\t\t\t\tconsole.log(\"here\");\r\n\t\t\t\t\tvideo.play();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// the chart\r\n\tvar names = [\"uniform\"];\r\n\tvar groups = new vis.DataSet();\r\n\tvar container = document.getElementById(\"visualization\");\r\n\tvar dataset = new vis.DataSet();\r\n\tvar now = vis.moment();\n\tvar delay = 100;\n\t\n\tvar options = {\n\t\tdrawPoints: false,\n\t\tdataAxis: {\n\t\t\tvisible: true,\n\t\t\tleft: {\n\t\t\t\ttitle: {\n\t\t\t\t\ttext: \"Normalized Amplitude\",\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tlegend: false,\n\t\tstart: vis.moment().add(-5, \"seconds\"), // display start,  end\n\t\tend: vis.moment().add(10, \"seconds\"),\n\t\n\t};\n\t\r\n\t// eslint-disable-next-line\r\n\tvar graph2d = new vis.Graph2d(container, dataset, groups, options);\n\n\t// could delete the group , just use dataset\r\n\tgroups.add({\r\n\t\tid: 0,\r\n\t\tcontent: names[0],\r\n\t\toptions: {\r\n\t\t\tdrawPoints: false,\r\n\t\t\tinterpolation: {\r\n\t\t\t\tparametrization: \"uniform\",\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\r\n\tfunction addDataPoint() {\r\n\t\tvar now = vis.moment();\r\n\t\tvar yVal = 1 + Math.round(Math.random() * 10);\r\n\r\n\t\tdataset.add([{\r\n\t\t\tx: now,\r\n\t\t\ty: yVal,\r\n\t\t\tgroup: 0\r\n\t\t}])\n\t\tsetTimeout(addDataPoint, delay);\r\n\r\n\t}\r\n\r\n\tfunction moveWindow() {\r\n\n\t\tlet strategy = 'static';\r\n\t\tvar range = graph2d.getWindow();\n\t\tnow = vis.moment();\n\t\t\r\n\t\tvar interval = range.end - range.start;\n\t\t\n\t\tif (now > range.end) {\n\t\t\tgraph2d.setWindow(now - 0.1 * interval, now + 0.9 * interval);\n\t\t}\n\t\t\r\n\t\tswitch (strategy) {\r\n\t\t\tdefault: // 'static'\r\n\t\t\t\t// move the window 90% to the left when now is larger than the end of the window\r\n\t\t\t\tif (range > 10) {\n\t\t\t\t\tconsole.log(\"move window\");\r\n\t\t\t\t\tgraph2d.setWindow(now - 0.1 * interval, now + 0.9 * interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(moveWindow, delay);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\n\t\n\t\n\taddDataPoint();\n\tmoveWindow();\r\n}\n"]}]}