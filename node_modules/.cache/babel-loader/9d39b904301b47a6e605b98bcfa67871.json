{"remainingRequest":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js!/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/haojianie/Desktop/Web/rppg-master/src/components/AttentionMask.js","dependencies":[{"path":"/Users/haojianie/Desktop/Web/rppg-master/src/components/AttentionMask.js","mtime":1597771204395},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/cache-loader/dist/cjs.js","mtime":1597616075057},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js","mtime":1597616074968},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1597616074257}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaGFvamlhbmllL0Rlc2t0b3AvV2ViL3JwcGctbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2hhb2ppYW5pZS9EZXNrdG9wL1dlYi9ycHBnLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2dldCBmcm9tICIvVXNlcnMvaGFvamlhbmllL0Rlc2t0b3AvV2ViL3JwcGctbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMvaGFvamlhbmllL0Rlc2t0b3AvV2ViL3JwcGctbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL2hhb2ppYW5pZS9EZXNrdG9wL1dlYi9ycHBnLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICogYXMgdGYgZnJvbSAnQHRlbnNvcmZsb3cvdGZqcyc7CmV4cG9ydCB2YXIgQXR0ZW50aW9uTWFzayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX3RmJGxheWVycyRMYXllcikgewogIF9pbmhlcml0cyhBdHRlbnRpb25NYXNrLCBfdGYkbGF5ZXJzJExheWVyKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihBdHRlbnRpb25NYXNrKTsKCiAgZnVuY3Rpb24gQXR0ZW50aW9uTWFzayhjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdHRlbnRpb25NYXNrKTsKCiAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBdHRlbnRpb25NYXNrLCBbewogICAga2V5OiAiY29tcHV0ZU91dHB1dFNoYXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlT3V0cHV0U2hhcGUoaW5wdXRTaGFwZSkgewogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCiAgICAgIC8vCWNvbnNvbGUubG9nKGlucHV0U2hhcGUpCiAgICAgIC8vCWNvbnNvbGUubG9nKHRoaXMubmFtZSkKICAgICAgdGhpcy5pbnB1dFNoYXBlID0gaW5wdXRTaGFwZTsKICAgICAgcmV0dXJuIFtpbnB1dFNoYXBlWzBdLCBpbnB1dFNoYXBlWzFdLCBpbnB1dFNoYXBlWzJdLCBpbnB1dFNoYXBlWzNdXTsKICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCgogIH0sIHsKICAgIGtleTogImNhbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGwoaW5wdXRzLCBrd2FyZ3MpIHsKICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLwogICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbMF07IC8vY29uc29sZS5sb2coaW5wdXRzWzBdLnNoYXBlKTsKICAgICAgLy9jb25zb2xlLmxvZyhpbnB1dHNbMF0ucHJpbnQoMSkpOwogICAgICAvL2NvbnNvbGUubG9nKGlucHV0KTsKCiAgICAgIHZhciBpbnB1dFN1bSA9IHRmLnN1bShpbnB1dCwgMSwgMSk7IC8vCWlucHV0U3VtLnByaW50KDEpOwogICAgICAvLwlpbnB1dFN1bS5wcmludCgxKTsKCiAgICAgIGlucHV0U3VtID0gdGYuc3VtKGlucHV0U3VtLCAyLCAxKTsKICAgICAgdmFyIG91dCA9IGlucHV0LmRpdihpbnB1dFN1bSkubXVsKDAuNSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb25maWcoKSB7CiAgICAgIHZhciBjb25maWcgPSBfZ2V0KF9nZXRQcm90b3R5cGVPZihBdHRlbnRpb25NYXNrLnByb3RvdHlwZSksICJnZXRDb25maWciLCB0aGlzKS5jYWxsKHRoaXMpOwoKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImdldENsYXNzTmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKCkgewogICAgICByZXR1cm4gJ0F0dGVudGlvbk1hc2snOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF0dGVudGlvbk1hc2s7Cn0odGYubGF5ZXJzLkxheWVyKTsKCl9kZWZpbmVQcm9wZXJ0eShBdHRlbnRpb25NYXNrLCAiY2xhc3NOYW1lIiwgJ0F0dGVudGlvbk1hc2snKTsKCkF0dGVudGlvbk1hc2suY2xhc3NOYW1lID0gJ0F0dGVudGlvbk1hc2snOyAvLyBzdGF0aWMgdmFyaWFibGU="},{"version":3,"sources":["/Users/haojianie/Desktop/Web/rppg-master/src/components/AttentionMask.js"],"names":["tf","AttentionMask","config","inputShape","inputs","kwargs","input","inputSum","sum","out","div","mul","layers","Layer","className"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,EAAZ,MAAoB,kBAApB;AAEA,WAAaC,aAAb;AAAA;;AAAA;;AAEC,yBAAYC,MAAZ,EAAoB;AAAA;;AAAA,6BACbA,MADa;AAEnB;;AAJF;AAAA;AAAA,uCAMoBC,UANpB,EAMgC;AAC9B;AACD;AACA;AACC,WAAKA,UAAL,GAAkBA,UAAlB;AACA,aAAO,CAACA,UAAU,CAAC,CAAD,CAAX,EAAgBA,UAAU,CAAC,CAAD,CAA1B,EAA+BA,UAAU,CAAC,CAAD,CAAzC,EAA8CA,UAAU,CAAC,CAAD,CAAxD,CAAP;AACA,KAZF,CAcC;;AAdD;AAAA;AAAA,yBAeMC,MAfN,EAecC,MAfd,EAesB;AACpB;AACA,UAAIC,KAAK,GAAGF,MAAM,CAAC,CAAD,CAAlB,CAFoB,CAGpB;AACA;AACA;;AAEA,UAAIG,QAAQ,GAAGP,EAAE,CAACQ,GAAH,CAAOF,KAAP,EAAc,CAAd,EAAiB,CAAjB,CAAf,CAPoB,CAQrB;AACA;;AACCC,MAAAA,QAAQ,GAAGP,EAAE,CAACQ,GAAH,CAAOD,QAAP,EAAiB,CAAjB,EAAoB,CAApB,CAAX;AACA,UAAIE,GAAG,GAAGH,KAAK,CAACI,GAAN,CAAUH,QAAV,EAAoBI,GAApB,CAAwB,GAAxB,CAAV;AAEA,aAAOF,GAAP;AACA;AA7BF;AAAA;AAAA,gCA+Ba;AACX,UAAMP,MAAM,+EAAZ;;AACA,aAAOA,MAAP;AACA;AAlCF;AAAA;AAAA,mCAoCuB;AACrB,aAAO,eAAP;AACA;AAtCF;;AAAA;AAAA,EAAmCF,EAAE,CAACY,MAAH,CAAUC,KAA7C;;gBAAaZ,a,eACO,e;;AAwCpBA,aAAa,CAACa,SAAd,GAA0B,eAA1B,C,CAA2C","sourcesContent":["import * as tf from '@tensorflow/tfjs';\r\n\r\nexport class AttentionMask extends tf.layers.Layer {\r\n\tstatic className = 'AttentionMask';\r\n\tconstructor(config) {\r\n\t\tsuper(config);\r\n\t}\r\n\r\n\tcomputeOutputShape(inputShape) {\n\t\t/* eslint-disable no-console */\n\t//\tconsole.log(inputShape)\n\t//\tconsole.log(this.name)\n\t\tthis.inputShape = inputShape;\r\n\t\treturn [inputShape[0], inputShape[1], inputShape[2], inputShape[3]];\r\n\t}\r\n\r\n\t// eslint-disable-next-line\r\n\tcall(inputs, kwargs) {\n\t\t/* eslint-disable no-console */\n\t\tvar input = inputs[0];\n\t\t//console.log(inputs[0].shape);\n\t\t//console.log(inputs[0].print(1));\n\t\t//console.log(input);\n\t\t\r\n\t\tvar inputSum = tf.sum(input, 1, 1);\n\t//\tinputSum.print(1);\r\n\t//\tinputSum.print(1);\r\n\t\tinputSum = tf.sum(inputSum, 2, 1);\n\t\tvar out = input.div(inputSum).mul(0.5);\n\t\t\n\t\treturn out;\r\n\t}\r\n\r\n\tgetConfig() {\r\n\t\tconst config = super.getConfig();\r\n\t\treturn config;\r\n\t}\r\n\r\n\tstatic getClassName() {\r\n\t\treturn 'AttentionMask';\r\n\t}\r\n}\n\nAttentionMask.className = 'AttentionMask'; // static variable\n"]}]}