{"remainingRequest":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js!/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/haojianie/Desktop/Web/rppg-master/src/components/sketch.js","dependencies":[{"path":"/Users/haojianie/Desktop/Web/rppg-master/src/components/sketch.js","mtime":1597773438888},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/cache-loader/dist/cjs.js","mtime":1597616075057},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js","mtime":1597616074968},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1597616074257}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2hhb2ppYW5pZS9EZXNrdG9wL1dlYi9ycHBnLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAqIGFzIHZpcyBmcm9tICd2aXMtdGltZWxpbmUvc3RhbmRhbG9uZSc7CmltcG9ydCAqIGFzIHRmIGZyb20gJ0B0ZW5zb3JmbG93L3RmanMnOwppbXBvcnQgeyBBdHRlbnRpb25NYXNrIH0gZnJvbSAnLi9BdHRlbnRpb25NYXNrLmpzJzsKaW1wb3J0IHsgVFNNIH0gZnJvbSAnLi9UU00uanMnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBydW4oKSB7CiAgdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvJyk7CiAgdmFyIHBhdGggPSAiLi9tb2RlbC5qc29uIjsKICB2YXIgb3JpZ192LCBYc3ViLCBkWHN1YiwgcHJldkZyYW1lOwogIHZhciBkaWZmQmF0Y2gsIEJhdGNoOwogIHZhciBkZWxheSA9IDEwOwogIHZhciBiYXRjaF9zaXplID0gMjA7CiAgdmFyIGJhdGNoX2NvdW50ZXIgPSAwOwogIHZhciBkaW0gPSAzNjsKICB2YXIgcHJlZGljdGlvbjsKICB2YXIgbW9kZWw7CiAgdmFyIHByZWRpY3Rpb25fcnBwZywgcHJlZGljdGlvbl9yZXNwOwogIHZhciB0X3N0YXJ0LCB0X2VuZDsgLy8gUmVnaXN0ZXIgQ3Vzb21pemVkIExheWVycwoKICB0Zi5zZXJpYWxpemF0aW9uLnJlZ2lzdGVyQ2xhc3MoVFNNKTsKICB0Zi5zZXJpYWxpemF0aW9uLnJlZ2lzdGVyQ2xhc3MoQXR0ZW50aW9uTWFzayk7IC8vIExvYWQgTUwgTW9kZWwKCiAgbG9hZE1vZGVsKCk7CgogIGZ1bmN0aW9uIGxvYWRNb2RlbCgpIHsKICAgIHJldHVybiBfbG9hZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSAvLyBEZWZpbml0aW9uIGZvciB0aGUgbGluZSBjaGFydCAKCgogIGZ1bmN0aW9uIF9sb2FkTW9kZWwoKSB7CiAgICBfbG9hZE1vZGVsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRmLmxvYWRMYXllcnNNb2RlbChwYXRoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBtb2RlbCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc2Z1bGx5IGxvYWRlZCBtbCBtb2RlbCIpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKICAgIHJldHVybiBfbG9hZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICB2YXIgbmFtZXMgPSBbInVuaWZvcm0iXTsKICB2YXIgZ3JvdXBzID0gbmV3IHZpcy5EYXRhU2V0KCk7CiAgdmFyIGNvbnRhaW5lcl9ycHBnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXJ0X3JwcGciKTsKICB2YXIgY29udGFpbmVyX3Jlc3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhcnRfcmVzcCIpOwogIHZhciBkYXRhc2V0X3JwcGcgPSBuZXcgdmlzLkRhdGFTZXQoKTsKICB2YXIgZGF0YXNldF9yZXNwID0gbmV3IHZpcy5EYXRhU2V0KCk7CiAgdmFyIG5vdyA9IHZpcy5tb21lbnQoKTsKICB2YXIgb3B0aW9ucyA9IHsKICAgIGRyYXdQb2ludHM6IGZhbHNlLAogICAgZGF0YUF4aXM6IHsKICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgbGVmdDogewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0OiAiTm9ybWFsaXplZCBBbXBsaXR1ZGUiCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbGVnZW5kOiBmYWxzZSwKICAgIHN0YXJ0OiB2aXMubW9tZW50KCkuYWRkKC01LCAic2Vjb25kcyIpLAogICAgLy8gZGlzcGxheSBzdGFydCwgIGVuZAogICAgZW5kOiB2aXMubW9tZW50KCkuYWRkKDEwLCAic2Vjb25kcyIpCiAgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCgogIHZhciBncmFwaDJkX3JwcGcgPSBuZXcgdmlzLkdyYXBoMmQoY29udGFpbmVyX3JwcGcsIGRhdGFzZXRfcnBwZywgZ3JvdXBzLCBvcHRpb25zKTsKICB2YXIgZ3JhcGgyZF9yZXNwID0gbmV3IHZpcy5HcmFwaDJkKGNvbnRhaW5lcl9yZXNwLCBkYXRhc2V0X3Jlc3AsIGdyb3Vwcywgb3B0aW9ucyk7IC8vIE5vdGU6IGNvdWxkIGRlbGV0ZSB0aGUgZ3JvdXAgLCBqdXN0IHVzZSBkYXRhc2V0CgogIGdyb3Vwcy5hZGQoewogICAgaWQ6IDAsCiAgICBjb250ZW50OiBuYW1lc1swXSwKICAgIG9wdGlvbnM6IHsKICAgICAgZHJhd1BvaW50czogZmFsc2UsCiAgICAgIGludGVycG9sYXRpb246IHsKICAgICAgICBwYXJhbWV0cml6YXRpb246ICJ1bmlmb3JtIgogICAgICB9CiAgICB9CiAgfSk7CiAgc3RhcnRWaWRlbygpOwoKICBmdW5jdGlvbiBsb29wKCkgewogICAgcmV0dXJuIF9sb29wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSAvLyBWaWRlbyBkYXRhIFByZXByb2Nlc3MKCgogIGZ1bmN0aW9uIF9sb29wKCkgewogICAgX2xvb3AgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIHVwZGF0ZSBGcmFtZQogICAgICAgICAgICAgIG9yaWdfdiA9IHRmLmJyb3dzZXIuZnJvbVBpeGVscyh2aWRlbyk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBwcmVwcm9jZXNzKCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgLy9sb29wKCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dChsb29wLCBkZWxheSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CiAgICByZXR1cm4gX2xvb3AuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIHByZXByb2Nlc3MoKSB7CiAgICByZXR1cm4gX3ByZXByb2Nlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIF9wcmVwcm9jZXNzKCkgewogICAgX3ByZXByb2Nlc3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIFhzdWIgPSB0Zi5pbWFnZS5yZXNpemVCaWxpbmVhcihvcmlnX3YsIFtkaW0sIGRpbV0pOwogICAgICAgICAgICAgIFhzdWIgPSBYc3ViLmFzVHlwZSgnZmxvYXQzMicpLmRpdih0Zi5zY2FsYXIoMjU1KSk7CiAgICAgICAgICAgICAgWHN1YiA9IFhzdWIuZXhwYW5kRGltcygwKTsgLy8gKDEsIDM2LCAzNiwgMykKCiAgICAgICAgICAgICAgaWYgKHByZXZGcmFtZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAvLwl0MCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgICAgICAgICAgcHJldkZyYW1lID0gWHN1YjsKICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygibmV3IGRhdGEgaW5pdGlhbGl6ZSIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAvLyBkaWRuJ3QgZ2V0ICBvbmx5IHRoZSAzMDAsIDMwMCAsIGllIGRpZG4ndCBjcm9wCQkKICAgICAgICAgICAgICAgIC8vIEZSQU1FIERJRkY6CiAgICAgICAgICAgICAgICBkWHN1YiA9IHRmLmRpdih0Zi5zdWIoWHN1YiwgcHJldkZyYW1lKSwgdGYuYWRkKFhzdWIsIHByZXZGcmFtZSkpOyAvLyBTVUJUUkFDVCBNRUFOIE9GIElNRzoKCiAgICAgICAgICAgICAgICBkWHN1YiA9IHRmLmRpdihkWHN1YiwgdGYubW9tZW50cyhkWHN1YikudmFyaWFuY2Uuc3FydCgpKTsgLy8gZHhzdWIgLyBucC5zdGQoZHhzdWIsZGRvZj0xKQoKICAgICAgICAgICAgICAgIFhzdWIgPSB0Zi5zdWIoWHN1YiwgdGYubWVhbihYc3ViKSk7IC8vIFhzdWIgPSBYc3ViIC0gWHN1Yi5tZWFuKGF4aXMgPSAwKQoKICAgICAgICAgICAgICAgIFhzdWIgPSB0Zi5kaXYoWHN1YiwgdGYubW9tZW50cyhYc3ViKS52YXJpYW5jZS5zcXJ0KCkpOyAvLyBYc3ViID0gWHN1YiAtIFhzdWIubWVhbihheGlzID0gMCkKCiAgICAgICAgICAgICAgICBwcmV2RnJhbWUgPSBYc3ViOwoKICAgICAgICAgICAgICAgIGlmIChiYXRjaF9jb3VudGVyID09IDApIHsKICAgICAgICAgICAgICAgICAgQmF0Y2ggPSB0Zi5jYXN0KFhzdWIsICdmbG9hdDMyJyk7CiAgICAgICAgICAgICAgICAgIGRpZmZCYXRjaCA9IGRYc3ViOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgQmF0Y2ggPSB0Zi5jb25jYXQoW0JhdGNoLCBYc3ViXSk7IC8vIG5vdGUgdGhlIHhzdWIgaGVyZSBpcyBhZnRlciAKCiAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgICAgICAgICAgLy8JY29uc29sZS5sb2coImJlbG93IHByb2Nlc3NlZCBCYXRjaCBhbmQgZGlmZkJhdGNoIik7CgogICAgICAgICAgICAgICAgICBkaWZmQmF0Y2ggPSB0Zi5jb25jYXQoW2RpZmZCYXRjaCwgZFhzdWJdKTsgLy8JQmF0Y2gucHJpbnQodHJ1ZSk7CiAgICAgICAgICAgICAgICAgIC8vCWRpZmZCYXRjaC5wcmludCh0cnVlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBiYXRjaF9jb3VudGVyKys7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIShiYXRjaF9jb3VudGVyID09IGJhdGNoX3NpemUpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0X3N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBtb2RlbC5wcmVkaWN0KFtkaWZmQmF0Y2gsIEJhdGNoXSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcHJlZGljdGlvbiA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByZWRpY3Rpb25bMF0uYXJyYXlTeW5jKCkpOwogICAgICAgICAgICAgIHByZWRpY3Rpb25fcnBwZyA9IHByZWRpY3Rpb25bMF0uY3Vtc3VtKCkuYXJyYXlTeW5jKCk7CiAgICAgICAgICAgICAgcHJlZGljdGlvbl9yZXNwID0gcHJlZGljdGlvblsxXS5jdW1zdW0oKS5hcnJheVN5bmMoKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcmVkaWN0aW9uX3JwcGcpOyAvLwljb25zb2xlLmxvZyhwcmVkaWN0aW9uX3Jlc3ApOwoKICAgICAgICAgICAgICB0X2VuZCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0b3RhbCB0aW1lIHNwZW5kIGZvciBvbmUgQmF0Y2ggIiArICh0X2VuZCAtIHRfc3RhcnQpKTsgLy8JY29uc29sZS5sb2coKQoKICAgICAgICAgICAgICBhZGREYXRhUG9pbnQoKTsgLy8gaW5pdGlhbGl6YXRpb24gZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbgoKICAgICAgICAgICAgICBCYXRjaCA9IG51bGw7CiAgICAgICAgICAgICAgZGlmZkJhdGNoID0gbnVsbDsKICAgICAgICAgICAgICBwcmV2RnJhbWUgPSBudWxsOwogICAgICAgICAgICAgIGJhdGNoX2NvdW50ZXIgPSAwOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKTsKICAgIHJldHVybiBfcHJlcHJvY2Vzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRWaWRlbygpIHsKICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7CiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgICB2aWRlbzogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigibG9hZGVkbWV0YWRhdGEiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyB1c2VkIHRvIGhhdmUgYW4gZSBoZXJlCiAgICAgICAgICB2aWRlby5wbGF5KCk7CiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCgogICAgICAgICAgY29uc29sZS5sb2coIldlYmNhbSB2aWRlbyBzdWNjZXNzZnVsbHkgbG9hZGVkIik7CiAgICAgICAgICBsb29wKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0gLy8gdGhlIGNoYXJ0CgoKICBmdW5jdGlvbiBhZGREYXRhUG9pbnQoKSB7CiAgICB2YXIgaSA9IDA7CgogICAgd2hpbGUgKGkgPCAyMCkgewogICAgICBub3cgPSB2aXMubW9tZW50KCk7CiAgICAgIGRhdGFzZXRfcnBwZy5hZGQoW3sKICAgICAgICB4OiBub3csCiAgICAgICAgeTogcHJlZGljdGlvbl9ycHBnW2ldLAogICAgICAgIGdyb3VwOiAwCiAgICAgIH1dKTsKICAgICAgZGF0YXNldF9yZXNwLmFkZChbewogICAgICAgIHg6IG5vdywKICAgICAgICB5OiBwcmVkaWN0aW9uX3Jlc3BbaV0sCiAgICAgICAgZ3JvdXA6IDAKICAgICAgfV0pOwogICAgICBpKys7CiAgICB9CgogICAgbW92ZVdpbmRvdygpOyAvL3NldFRpbWVvdXQobW92ZVdpbmRvdywgZGVsYXkpOwogIH0KCiAgZnVuY3Rpb24gbW92ZVdpbmRvdygpIHsKICAgIHZhciBzdHJhdGVneSA9ICdzdGF0aWMnOwogICAgdmFyIHJhbmdlID0gZ3JhcGgyZF9ycHBnLmdldFdpbmRvdygpOwogICAgbm93ID0gdmlzLm1vbWVudCgpOwogICAgdmFyIGludGVydmFsID0gcmFuZ2UuZW5kIC0gcmFuZ2Uuc3RhcnQ7CgogICAgaWYgKG5vdyA+IHJhbmdlLmVuZCkgewogICAgICBncmFwaDJkX3JwcGcuc2V0V2luZG93KG5vdyAtIDAuMSAqIGludGVydmFsLCBub3cgKyAwLjkgKiBpbnRlcnZhbCk7CiAgICAgIGdyYXBoMmRfcmVzcC5zZXRXaW5kb3cobm93IC0gMC4xICogaW50ZXJ2YWwsIG5vdyArIDAuOSAqIGludGVydmFsKTsKICAgIH0KCiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgLy8gJ3N0YXRpYycKICAgICAgICAvLyBtb3ZlIHRoZSB3aW5kb3cgOTAlIHRvIHRoZSBsZWZ0IHdoZW4gbm93IGlzIGxhcmdlciB0aGFuIHRoZSBlbmQgb2YgdGhlIHdpbmRvdwogICAgICAgIGlmIChyYW5nZSA+IDEwKSB7CiAgICAgICAgICBncmFwaDJkX3JwcGcuc2V0V2luZG93KG5vdyAtIDAuMSAqIGludGVydmFsLCBub3cgKyAwLjkgKiBpbnRlcnZhbCk7CiAgICAgICAgICBncmFwaDJkX3Jlc3Auc2V0V2luZG93KG5vdyAtIDAuMSAqIGludGVydmFsLCBub3cgKyAwLjkgKiBpbnRlcnZhbCk7CiAgICAgICAgfQoKICAgICAgICBzZXRUaW1lb3V0KG1vdmVXaW5kb3csIGRlbGF5KTsKICAgICAgICBicmVhazsKICAgIH0KICB9Cn0="},{"version":3,"sources":["/Users/haojianie/Desktop/Web/rppg-master/src/components/sketch.js"],"names":["vis","tf","AttentionMask","TSM","run","video","document","getElementById","path","orig_v","Xsub","dXsub","prevFrame","diffBatch","Batch","delay","batch_size","batch_counter","dim","prediction","model","prediction_rppg","prediction_resp","t_start","t_end","serialization","registerClass","loadModel","loadLayersModel","console","log","names","groups","DataSet","container_rppg","container_resp","dataset_rppg","dataset_resp","now","moment","options","drawPoints","dataAxis","visible","left","title","text","legend","start","add","end","graph2d_rppg","Graph2d","graph2d_resp","id","content","interpolation","parametrization","startVideo","loop","browser","fromPixels","preprocess","setTimeout","image","resizeBilinear","asType","div","scalar","expandDims","sub","moments","variance","sqrt","mean","cast","concat","performance","predict","arraySync","cumsum","addDataPoint","navigator","mediaDevices","getUserMedia","then","stream","srcObject","addEventListener","play","i","x","y","group","moveWindow","strategy","range","getWindow","interval","setWindow"],"mappings":"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","sourcesContent":["import * as vis from 'vis-timeline/standalone';\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport {\r\n\tAttentionMask\r\n} from './AttentionMask.js';\r\nimport {\r\n\tTSM\r\n} from './TSM.js';\r\n\r\nexport default function run() {\r\n\r\n\tlet video = document.getElementById('video');\r\n\tvar path = \"./model.json\";\r\n\tvar orig_v, Xsub, dXsub, prevFrame;\r\n\tvar diffBatch, Batch;\r\n\tvar delay = 10;\r\n\tvar batch_size = 20;\r\n\tvar batch_counter = 0;\r\n\tvar dim = 36;\r\n\tvar prediction;\r\n\tlet model;\r\n\tlet prediction_rppg, prediction_resp;\r\n\tvar t_start, t_end;\r\n\t// Register Cusomized Layers\r\n\ttf.serialization.registerClass(TSM);\r\n\ttf.serialization.registerClass(AttentionMask);\r\n\r\n\t// Load ML Model\r\n\tloadModel();\r\n\tasync function loadModel() {\r\n\t\tmodel = await tf.loadLayersModel(path);\r\n\t\t/* eslint-disable no-console */\r\n\t\tconsole.log(\"Successfully loaded ml model\");\r\n\t}\r\n\r\n\t// Definition for the line chart \r\n\tvar names = [\"uniform\"];\r\n\tvar groups = new vis.DataSet();\r\n\tvar container_rppg = document.getElementById(\"chart_rppg\");\r\n\tvar container_resp = document.getElementById(\"chart_resp\");\r\n\tvar dataset_rppg = new vis.DataSet();\r\n\tvar dataset_resp = new vis.DataSet();\r\n\tvar now = vis.moment();\r\n\r\n\tvar options = {\r\n\t\tdrawPoints: false,\r\n\t\tdataAxis: {\r\n\t\t\tvisible: true,\r\n\t\t\tleft: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: \"Normalized Amplitude\",\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tlegend: false,\r\n\t\tstart: vis.moment().add(-5, \"seconds\"), // display start,  end\r\n\t\tend: vis.moment().add(10, \"seconds\"),\r\n\r\n\t};\r\n\r\n\t// eslint-disable-next-line\r\n\tvar graph2d_rppg = new vis.Graph2d(container_rppg, dataset_rppg, groups, options);\r\n\tvar graph2d_resp = new vis.Graph2d(container_resp, dataset_resp, groups, options);\r\n\r\n\r\n\t// Note: could delete the group , just use dataset\r\n\tgroups.add({\r\n\t\tid: 0,\r\n\t\tcontent: names[0],\r\n\t\toptions: {\r\n\t\t\tdrawPoints: false,\r\n\t\t\tinterpolation: {\r\n\t\t\t\tparametrization: \"uniform\",\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\tstartVideo();\r\n\r\n\tasync function loop() {\r\n\t\t// update Frame\r\n\t\torig_v = tf.browser.fromPixels(video);\r\n\t\tawait preprocess();\r\n\t\t//loop();\r\n\t\tsetTimeout(loop, delay);\r\n\t}\r\n\r\n\t// Video data Preprocess\r\n\tasync function preprocess() {\r\n\r\n\t\tXsub = tf.image.resizeBilinear(orig_v, [dim, dim]);\r\n\t\tXsub = Xsub.asType('float32').div(tf.scalar(255));\r\n\t\tXsub = Xsub.expandDims(0); // (1, 36, 36, 3)\r\n\r\n\t\tif (prevFrame == null) {\r\n\t\t\t//\tt0 = performance.now();\r\n\t\t\tprevFrame = Xsub;\r\n\t\t\t/* eslint-disable no-console */\r\n\t\t\tconsole.log(\"new data initialize\");\r\n\r\n\t\t} else {\r\n\t\t\t//--------------------------------------\r\n\t\t\t// didn't get  only the 300, 300 , ie didn't crop\t\t\r\n\r\n\t\t\t// FRAME DIFF:\r\n\t\t\tdXsub = tf.div(tf.sub(Xsub, prevFrame), tf.add(Xsub, prevFrame));\r\n\r\n\t\t\t// SUBTRACT MEAN OF IMG:\r\n\t\t\tdXsub = tf.div(dXsub, tf.moments(dXsub).variance.sqrt()); // dxsub / np.std(dxsub,ddof=1)\r\n\t\t\tXsub = tf.sub(Xsub, tf.mean(Xsub)); // Xsub = Xsub - Xsub.mean(axis = 0)\r\n\t\t\tXsub = tf.div(Xsub, tf.moments(Xsub).variance.sqrt()); // Xsub = Xsub - Xsub.mean(axis = 0)\r\n\r\n\t\t\tprevFrame = Xsub;\r\n\t\t\tif (batch_counter == 0) {\r\n\t\t\t\tBatch = tf.cast(Xsub, 'float32');\r\n\t\t\t\tdiffBatch = dXsub;\r\n\t\t\t} else {\r\n\t\t\t\tBatch = tf.concat([Batch, Xsub]) // note the xsub here is after \r\n\t\t\t\t/* eslint-disable no-console */\r\n\t\t\t\t//\tconsole.log(\"below processed Batch and diffBatch\");\r\n\t\t\t\tdiffBatch = tf.concat([diffBatch, dXsub]);\r\n\t\t\t\t//\tBatch.print(true);\r\n\t\t\t\t//\tdiffBatch.print(true);\r\n\t\t\t}\r\n\t\t\tbatch_counter++;\r\n\t\t}\r\n\r\n\t\tif (batch_counter == batch_size) {\r\n\t\t\tt_start = performance.now();\r\n\t\t\tprediction = await model.predict([diffBatch, Batch]);\n\t\t\tconsole.log(prediction[0].arraySync());\r\n\t\t\tprediction_rppg = prediction[0].cumsum().arraySync();\r\n\t\t\tprediction_resp = prediction[1].cumsum().arraySync();\n\t\t\tconsole.log(prediction_rppg);\n\t\t//\tconsole.log(prediction_resp);\r\n\t\t\tt_end = performance.now();\r\n\t\t\tconsole.log(\"total time spend for one Batch \" + (t_end - t_start));\r\n\t\t\t//\tconsole.log()\r\n\t\t\taddDataPoint();\r\n\t\t\t// initialization for the next iteration\r\n\t\t\tBatch = null;\r\n\t\t\tdiffBatch = null;\r\n\t\t\tprevFrame = null;\r\n\t\t\tbatch_counter = 0;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction startVideo() {\r\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({\r\n\t\t\t\tvideo: true\r\n\t\t\t}).then(function(stream) {\r\n\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\tvideo.addEventListener(\"loadedmetadata\", function() { // used to have an e here\r\n\t\t\t\t\tvideo.play();\r\n\t\t\t\t\t/* eslint-disable no-console */\r\n\t\t\t\t\tconsole.log(\"Webcam video successfully loaded\");\r\n\t\t\t\t\tloop();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// the chart\r\n\tfunction addDataPoint() {\r\n\t\tvar i = 0;\r\n\t\twhile (i < 20) {\r\n\t\t\tnow = vis.moment()\r\n\t\t\tdataset_rppg.add([{\r\n\t\t\t\tx: now,\r\n\t\t\t\ty: prediction_rppg[i],\r\n\t\t\t\tgroup: 0\r\n\t\t\t}])\r\n\t\t\tdataset_resp.add([{\r\n\t\t\t\tx: now,\r\n\t\t\t\ty: prediction_resp[i],\r\n\t\t\t\tgroup: 0\r\n\t\t\t}])\r\n\t\t\ti++;\r\n\t\t}\n\t\tmoveWindow();\r\n\t\t//setTimeout(moveWindow, delay);\r\n\t}\r\n\r\n\tfunction moveWindow() {\n\t\t\r\n\t\tlet strategy = 'static';\r\n\t\tvar range = graph2d_rppg.getWindow();\r\n\t\tnow = vis.moment();\r\n\r\n\t\tvar interval = range.end - range.start;\r\n\r\n\t\tif (now > range.end) {\r\n\t\t\tgraph2d_rppg.setWindow(now - 0.1 * interval, now + 0.9 * interval);\r\n\t\t\tgraph2d_resp.setWindow(now - 0.1 * interval, now + 0.9 * interval);\r\n\t\t}\r\n\r\n\t\tswitch (strategy) {\r\n\t\t\tdefault: // 'static'\r\n\t\t\t\t// move the window 90% to the left when now is larger than the end of the window\r\n\t\t\t\tif (range > 10) {\r\n\t\t\t\t\tgraph2d_rppg.setWindow(now - 0.1 * interval, now + 0.9 * interval);\r\n\t\t\t\t\tgraph2d_resp.setWindow(now - 0.1 * interval, now + 0.9 * interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(moveWindow, delay);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\n"]}]}