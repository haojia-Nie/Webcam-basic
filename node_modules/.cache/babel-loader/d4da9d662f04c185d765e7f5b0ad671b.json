{"remainingRequest":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js!/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/haojianie/Desktop/Web/rppg-master/src/components/TSM.js","dependencies":[{"path":"/Users/haojianie/Desktop/Web/rppg-master/src/components/TSM.js","mtime":1597702536668},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/cache-loader/dist/cjs.js","mtime":1597616075057},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/babel-loader/lib/index.js","mtime":1597616074968},{"path":"/Users/haojianie/Desktop/Web/rppg-master/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1597616074257}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvaGFvamlhbmllL0Rlc2t0b3AvV2ViL3JwcGctbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZ2V0IGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiL1VzZXJzL2hhb2ppYW5pZS9EZXNrdG9wL1dlYi9ycHBnLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9oYW9qaWFuaWUvRGVza3RvcC9XZWIvcnBwZy1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvaGFvamlhbmllL0Rlc2t0b3AvV2ViL3JwcGctbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAqIGFzIHRmIGZyb20gJ0B0ZW5zb3JmbG93L3RmanMnOwpleHBvcnQgdmFyIFRTTSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX3RmJGxheWVycyRMYXllcikgewogIF9pbmhlcml0cyhUU00sIF90ZiRsYXllcnMkTGF5ZXIpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFRTTSk7CgogIGZ1bmN0aW9uIFRTTShjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUU00pOwoKICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRTTSwgW3sKICAgIGtleTogImNvbXB1dGVPdXRwdXRTaGFwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZU91dHB1dFNoYXBlKGlucHV0U2hhcGUpIHsKICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLwogICAgICBjb25zb2xlLmxvZyhpbnB1dFNoYXBlKTsKICAgICAgcmV0dXJuIGlucHV0U2hhcGU7CiAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQoKICB9LCB7CiAgICBrZXk6ICJjYWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsKGlucHV0cykgewogICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbMF07CiAgICAgIHZhciBuX2ZyYW1lID0gMjA7CiAgICAgIGlucHV0LnByaW50KDEpOwogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCgogICAgICBjb25zb2xlLmxvZyhpbnB1dHMpOwogICAgICBjb25zb2xlLmxvZygiVFNNIGlzIHN0YXJ0ZWQgZXhlY3V0aW9uIik7CiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KCiAgICAgIGNvbnNvbGUubG9nKGlucHV0LnNoYXBlKTsKICAgICAgdmFyIG50LCBoLCB3LCBjOwogICAgICB2YXIgb3V0LCBvdXQxLCBvdXQyLCBvdXQzLCBlbXB0eTsKICAgICAgdmFyIHBhZGRpbmcxLCBwYWRkaW5nMjsKICAgICAgbnQgPSBpbnB1dC5zaGFwZVswXTsKICAgICAgaCA9IGlucHV0LnNoYXBlWzFdOwogICAgICB3ID0gaW5wdXQuc2hhcGVbMl07CiAgICAgIGMgPSBpbnB1dC5zaGFwZVszXTsKICAgICAgdmFyIGZvbGRfZGl2ID0gMzsKICAgICAgdmFyIGZvbGQgPSBNYXRoLmZsb29yKGMgLyBmb2xkX2Rpdik7CiAgICAgIHZhciBsYXN0X2ZvbGQgPSBjIC0gKGZvbGRfZGl2IC0gMSkgKiBmb2xkOwogICAgICBjb25zb2xlLmxvZyhmb2xkKTsKICAgICAgaW5wdXQgPSB0Zi5yZXNoYXBlKGlucHV0LCBbbnQsIGgsIHcsIGNdKTsKICAgICAgaW5wdXQgPSB0Zi5leHBhbmREaW1zKGlucHV0LCAwKTsKCiAgICAgIHZhciBfdGYkc3BsaXQgPSB0Zi5zcGxpdChpbnB1dCwgW2ZvbGQsIGZvbGQsIGxhc3RfZm9sZF0sIC0xKTsKCiAgICAgIHZhciBfdGYkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3RmJHNwbGl0LCAzKTsKCiAgICAgIG91dDEgPSBfdGYkc3BsaXQyWzBdOwogICAgICBvdXQyID0gX3RmJHNwbGl0MlsxXTsKICAgICAgb3V0MyA9IF90ZiRzcGxpdDJbMl07CiAgICAgIC8vIFNoaWZ0IGxlZnQKICAgICAgcGFkZGluZzEgPSB0Zi56ZXJvcyhbb3V0MS5zaGFwZVswXSwgMSwgb3V0MS5zaGFwZVsyXSwgb3V0MS5zaGFwZVszXSwgZm9sZF0pOwogICAgICBjb25zb2xlLmxvZyhwYWRkaW5nMSk7CgogICAgICB2YXIgX3RmJHNwbGl0MyA9IHRmLnNwbGl0KG91dDEsIFsxLCBuX2ZyYW1lIC0gMV0sIDEpOwoKICAgICAgdmFyIF90ZiRzcGxpdDQgPSBfc2xpY2VkVG9BcnJheShfdGYkc3BsaXQzLCAyKTsKCiAgICAgIGVtcHR5ID0gX3RmJHNwbGl0NFswXTsKICAgICAgb3V0MSA9IF90ZiRzcGxpdDRbMV07CiAgICAgIGNvbnNvbGUubG9nKG91dDEpOwogICAgICBjb25zb2xlLmxvZyhlbXB0eSk7CiAgICAgIG91dDEgPSB0Zi5jb25jYXQoW291dDEsIHBhZGRpbmcxXSwgMSk7CiAgICAgIGNvbnNvbGUubG9nKG91dDEpOyAvLyBTaGlmdCByaWdodAoKICAgICAgcGFkZGluZzIgPSB0Zi56ZXJvcyhbb3V0Mi5zaGFwZVswXSwgMSwgb3V0Mi5zaGFwZVsyXSwgb3V0Mi5zaGFwZVszXSwgZm9sZF0pOwoKICAgICAgdmFyIF90ZiRzcGxpdDUgPSB0Zi5zcGxpdChvdXQyLCBbbl9mcmFtZSAtIDEsIDFdLCAxKTsKCiAgICAgIHZhciBfdGYkc3BsaXQ2ID0gX3NsaWNlZFRvQXJyYXkoX3RmJHNwbGl0NSwgMik7CgogICAgICBvdXQyID0gX3RmJHNwbGl0NlswXTsKICAgICAgZW1wdHkgPSBfdGYkc3BsaXQ2WzFdOwogICAgICBvdXQyID0gdGYuY29uY2F0KFtwYWRkaW5nMiwgb3V0Ml0sIDEpOwogICAgICBvdXQgPSB0Zi5jb25jYXQoW291dDEsIG91dDIsIG91dDNdLCAtMSk7CiAgICAgIG91dCA9IHRmLnJlc2hhcGUob3V0LCBbLTEsIGgsIHcsIGNdKTsKICAgICAgY29uc29sZS5sb2coIlRTTSBpcyBjYWxsZWQsIGZvbGxvd2luZyBpcyBpdHMgb3V0cHV0Iik7CiAgICAgIG91dC5wcmludCgxKTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb25maWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZygpIHsKICAgICAgdmFyIGNvbmZpZyA9IF9nZXQoX2dldFByb3RvdHlwZU9mKFRTTS5wcm90b3R5cGUpLCAiZ2V0Q29uZmlnIiwgdGhpcykuY2FsbCh0aGlzKTsKCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJnZXRDbGFzc05hbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENsYXNzTmFtZSgpIHsKICAgICAgcmV0dXJuICdUU00nOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRTTTsKfSh0Zi5sYXllcnMuTGF5ZXIpOwpUU00uY2xhc3NOYW1lID0gJ1RTTSc7IC8vIHN0YXRpYyB2YXJpYWJsZQ=="},{"version":3,"sources":["/Users/haojianie/Desktop/Web/rppg-master/src/components/TSM.js"],"names":["tf","TSM","config","inputShape","console","log","inputs","input","n_frame","print","shape","nt","h","w","c","out","out1","out2","out3","empty","padding1","padding2","fold_div","fold","Math","floor","last_fold","reshape","expandDims","split","zeros","concat","layers","Layer","className"],"mappings":"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","sourcesContent":["import * as tf from '@tensorflow/tfjs';\r\n\r\nexport class TSM extends tf.layers.Layer {\r\n\r\n\tconstructor(config) {\r\n\t\tsuper(config);\r\n\t}\r\n\r\n\tcomputeOutputShape(inputShape) {\n\t\t/* eslint-disable no-console */\n\t\tconsole.log(inputShape);\r\n\t\treturn inputShape;\r\n\t}\r\n\r\n\t// eslint-disable-next-line\r\n\tcall(inputs) {\r\n\n\t\tvar input = inputs[0];\n\t\tconst n_frame = 20;\n\t\tinput.print(1);\r\n\t\t/* eslint-disable no-console */\n\t\tconsole.log(inputs);\n\t\t\r\n\t\tconsole.log(\"TSM is started execution\");\r\n\t\t/* eslint-disable no-console */\r\n\t\tconsole.log(input.shape);\r\n\t\tlet nt, h, w, c;\r\n\t\tlet out, out1, out2, out3, empty;\r\n\t\tlet padding1, padding2;\n\t\tnt = input.shape[0];\n\t\th = input.shape[1];\n\t\tw = input.shape[2];\n\t\tc = input.shape[3];\n\t\t\r\n\t\tconst fold_div = 3;\r\n\t\tconst fold = Math.floor(c / fold_div);\r\n\t\tconst last_fold = c - (fold_div - 1) * fold;\n\t\tconsole.log(fold)\r\n\t\tinput = tf.reshape(input, [nt, h, w, c]);\r\n\t\tinput = tf.expandDims(input, 0);\r\n\t\t[out1, out2, out3] = tf.split(input, [fold, fold, last_fold], -1)\r\n\r\n\t\t// Shift left\r\n\t\tpadding1 = tf.zeros([out1.shape[0], 1, out1.shape[2], out1.shape[3], fold]);\n\t\t\n\t\tconsole.log(padding1);\r\n\t\t[empty, out1] = tf.split(out1, [1, n_frame - 1], 1);\n\t\tconsole.log(out1);\n\t\tconsole.log(empty);\r\n\t\tout1 = tf.concat([out1, padding1], 1);\n\t\tconsole.log(out1);\r\n\r\n\t\t// Shift right\r\n\t\tpadding2 = tf.zeros([out2.shape[0], 1, out2.shape[2], out2.shape[3], fold]);\r\n\t\t[out2, empty] = tf.split(out2, [n_frame - 1, 1], 1);\r\n\t\tout2 = tf.concat([padding2, out2], 1);\r\n\r\n\t\tout = tf.concat([out1, out2, out3], -1);\r\n\t\tout = tf.reshape(out, [-1, h, w, c]);\r\n\r\n\t\tconsole.log(\"TSM is called, following is its output\");\r\n\t\tout.print(1);\r\n\r\n\t\treturn out;\r\n\t}\r\n\r\n\tgetConfig() {\r\n\t\tconst config = super.getConfig();\r\n\t\treturn config;\r\n\t}\r\n\r\n\tstatic getClassName() {\r\n\t\treturn 'TSM';\r\n\t}\n\t\r\n}\r\n\r\nTSM.className = 'TSM'; // static variable\n"]}]}